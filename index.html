<!DOCTYPE html><html lang="en" class="light"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Sales Dashboard</title><script src="https://cdn.tailwindcss.com"></script><script>tailwind.config={darkMode:'class',theme:{extend:{}}}</script><style>::-webkit-scrollbar{width:8px;height:8px;}:-webkit-scrollbar-track{background:var(--scroll-track-bg,#f1f1f1);}:-webkit-scrollbar-thumb{background:var(--scroll-thumb-bg,#888);border-radius:4px;}:-webkit-scrollbar-thumb:hover{background:var(--scroll-thumb-hover,#555);}html.dark body{--scroll-track-bg:#2d3748;--scroll-thumb-bg:#4a5568;--scroll-thumb-hover:#6c7a8f;}html.light body{--scroll-track-bg:#f1f1f1;--scroll-thumb-bg:#888;--scroll-thumb-hover:#555;}</style></head><body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300 min-h-screen"><nav class="bg-white dark:bg-gray-800 shadow-md p-4 flex justify-between items-center transition-colors duration-300"><h1 class="text-2xl font-bold text-gray-800 dark:text-gray-200">Sales Dashboard</h1><button id="themeToggle" class="px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-300">Toggle Theme</button></nav><main class="container mx-auto p-4 mt-8"><div id="loading" class="text-center text-lg text-gray-600 dark:text-gray-400">Loading sales data...</div><div id="errorMessage" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 dark:bg-red-900 dark:text-red-200 dark:border-red-700" role="alert"><strong class="font-bold">Error!</strong><span class="block sm:inline" id="errorText"></span></div><div id="content" class="hidden"><div class="bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 transition-colors duration-300"><h2 class="text-3xl font-bold mb-4 text-gray-800 dark:text-gray-200">Summary</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"><div class="bg-blue-50 dark:bg-blue-900 p-4 rounded-md shadow-sm"><p class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Sales</p><p id="totalSales" class="text-2xl font-extrabold text-blue-600 dark:text-blue-300">$0.00</p></div><div class="bg-green-50 dark:bg-green-900 p-4 rounded-md shadow-sm"><p class="text-sm font-medium text-gray-600 dark:text-gray-300">Number of Transactions</p><p id="transactionCount" class="text-2xl font-extrabold text-green-600 dark:text-green-300">0</p></div></div></div><div class="bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 transition-colors duration-300"><h2 class="text-3xl font-bold mb-4 text-gray-800 dark:text-gray-200">All Transactions</h2><div class="overflow-x-auto"><table id="salesTable" class="min-w-full divide-y divide-gray-200 dark:divide-gray-700"><thead class="bg-gray-50 dark:bg-gray-700"><tr></tr></thead><tbody class="bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"></tbody></table></div></div></div></main><script>document.addEventListener('DOMContentLoaded', () => {const html = document.documentElement;const themeToggle = document.getElementById('themeToggle');const loadingDiv = document.getElementById('loading');const errorMessageDiv = document.getElementById('errorMessage');const errorTextSpan = document.getElementById('errorText');const contentDiv = document.getElementById('content');const totalSalesSpan = document.getElementById('totalSales');const transactionCountSpan = document.getElementById('transactionCount');const salesTable = document.getElementById('salesTable');const tableHead = salesTable.querySelector('thead tr');const tableBody = salesTable.querySelector('tbody');const currentTheme = localStorage.getItem('theme') || 'light';html.classList.add(currentTheme);themeToggle.innerText = currentTheme === 'dark' ? 'Light Mode' : 'Dark Mode';themeToggle.addEventListener('click', () => {if (html.classList.contains('light')) {html.classList.remove('light');html.classList.add('dark');localStorage.setItem('theme', 'dark');themeToggle.innerText = 'Light Mode';} else {html.classList.remove('dark');html.classList.add('light');localStorage.setItem('theme', 'light');themeToggle.innerText = 'Dark Mode';}});async function fetchAndProcessCSV() {try {const response = await fetch('data.csv');if (!response.ok) {throw new Error(`HTTP error! status: ${response.status}`);}const csvText = await response.text();const lines = csvText.trim().split('\n');if (lines.length <= 1) {throw new Error('CSV file is empty or contains only headers.');}const headers = lines[0].split(',').map(h => h.trim());const data = [];let totalSales = 0;tableHead.innerHTML = '';tableBody.innerHTML = '';headers.forEach(header => {const th = document.createElement('th');th.scope = 'col';th.className = 'px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider';th.innerText = header;tableHead.appendChild(th);});for (let i = 1; i < lines.length; i++) {const values = lines[i].split(',').map(v => v.trim());if (values.length !== headers.length) {console.warn(`Skipping malformed row ${i+1}: ${lines[i]}`);continue;}const rowObject = {};let rowSales = 0;for (let j = 0; j < headers.length; j++) {const header = headers[j].toLowerCase();const value = values[j];rowObject[header] = value;if (header === 'sales' && !isNaN(parseFloat(value))) {rowSales = parseFloat(value);totalSales += rowSales;}}data.push(rowObject);const tr = document.createElement('tr');tr.className = 'hover:bg-gray-50 dark:hover:bg-gray-700';headers.forEach(header => {const td = document.createElement('td');td.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200';td.innerText = rowObject[header.toLowerCase()] || '';tr.appendChild(td);});tableBody.appendChild(tr);}totalSalesSpan.innerText = `$${totalSales.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;transactionCountSpan.innerText = data.length.toLocaleString('en-US');document.title = `Sales Dashboard (${data.length} items)`;loadingDiv.classList.add('hidden');contentDiv.classList.remove('hidden');} catch (error) {console.error('Error fetching or processing CSV:', error);loadingDiv.classList.add('hidden');errorMessageDiv.classList.remove('hidden');errorTextSpan.innerText = `Failed to load sales data: ${error.message}`;document.title = 'Sales Dashboard - Error';}}fetchAndProcessCSV();});</script></body></html>